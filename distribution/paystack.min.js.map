{"version":3,"sources":["../src/PayStack.js"],"names":[],"mappings":"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","file":"paystack.min.js","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\n\nclass PayStack extends Component {\n  constructor(props) {\n    super(props);\n    this.payWithPaystack = this.payWithPaystack.bind(this);\n    this.loadScript = this.loadScript.bind(this);\n    this.loadscriptAndUpdateState = this.loadscriptAndUpdateState.bind(this);\n    this.state = {\n      ...this.props,\n      scriptLoaded: null,\n      class: this.props.class || this.props.className || \"\"\n    };\n  }\n\n  componentDidMount() {\n    this.loadscriptAndUpdateState()\n  }\n\n  loadscriptAndUpdateState() {\n    this.setState(\n      {\n        scriptLoaded: new Promise(resolve => {\n          this.loadScript(() => {\n            resolve();\n          });\n        })\n      }\n    );\n  }\n\n  loadScript(callback) {\n    const script = document.createElement(\"script\");\n    script.src = \"https://js.paystack.co/v2/inline.js\";\n    document.getElementsByTagName(\"head\")[0].appendChild(script);\n    if (script.readyState) {\n      // IE\n      script.onreadystatechange = () => {\n        if (\n          script.readyState === \"loaded\" ||\n          script.readyState === \"complete\"\n        ) {\n          script.onreadystatechange = null;\n          callback();\n        }\n      };\n    } else {\n      // Others\n      script.onload = () => {\n        callback();\n      };\n    }\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    for (const index in nextProps) {\n      if (nextProps[index] !== prevState[index]) {\n        return {\n          [index]: nextProps[index]\n        }\n      }\n    }\n\n    return null;\n  }\n\n  payWithPaystack() {\n    this.state.scriptLoaded &&\n      this.state.scriptLoaded.then(() => {\n      const {\n        paystackkey,\n        email,\n        amount,\n        callback,\n        close,\n        currency,\n        metadata,\n        reference,\n        error,\n        load,\n        firstname,\n        lastname,\n        phone,\n        customercode,\n        channels,\n        paymentrequest,\n        paymentpage,\n        subaccount,\n        bearer,\n        transaction_charge,\n        plan,\n        subscription_count,\n        plan_interval,\n        subscription_limit,\n        subscription_date\n      } = this.state\n\n      const payload = {\n        key: paystackkey,\n        email,\n        amount,\n        currency,\n        metadata,\n        reference,\n        onSuccess: (transaction) => callback(transaction),\n        onCancel: () => close(),\n        onLoad: (response) => load(response),\n        onError: (response) => error(response),\n        firstName: firstname,\n        lastName: lastname,\n        phone,\n        channels,\n        paymentRequest: paymentrequest,\n        paymentPage: paymentpage,\n        subaccountCode: subaccount,\n        bearer,\n        transactionCharge: transaction_charge,\n        subscriptionCount: subscription_count,\n        planInterval: plan_interval,\n        subscriptionLimit: subscription_limit,\n        subscriptionStartDate: subscription_date\n      }\n\n      if(customercode){\n        payload.customerCode = customercode\n      }\n\n      if(plan){\n        payload.planCode = plan\n      }\n\n      const paystackInstance  = new window.PaystackPop();\n      paystackInstance.newTransaction(payload)\n    });\n  }\n\n  render() {\n    const CustomTag = `${this.props.tag}`;\n    return (\n      <Fragment>\n        <CustomTag\n          className={this.state.class}\n          onClick={this.payWithPaystack}\n          disabled={this.state.disabled}\n        >\n          {this.state.text}\n        </CustomTag>\n      </Fragment>\n    );\n  }\n}\n\nPayStack.propTypes = {\n  text: PropTypes.string,\n  class: PropTypes.string,\n  tag: PropTypes.oneOf(['button', 'a', 'input']),\n  disabled: PropTypes.bool,\n  paystackkey: PropTypes.string.isRequired,\n  amount: PropTypes.number.isRequired, //in kobo\n  currency: PropTypes.string,\n  email: PropTypes.string.isRequired,\n  firstname: PropTypes.string,\n  lastname: PropTypes.string,\n  phone: PropTypes.string,\n  customercode: PropTypes.string,\n  channels: PropTypes.array,\n  paymentrequest: PropTypes.string,\n  paymentpage: PropTypes.string,\n  metadata: PropTypes.object,\n  reference: PropTypes.string.isRequired,\n  error: PropTypes.func,\n  load: PropTypes.func,\n  callback: PropTypes.func.isRequired,\n  close: PropTypes.func.isRequired,\n  subaccount: PropTypes.string,\n  bearer: PropTypes.string,\n  transaction_charge: PropTypes.number,\n  plan: PropTypes.string,\n  subscription_count: PropTypes.number,\n  plan_interval: PropTypes.string,\n  subscription_limit: PropTypes.number,\n  subscription_date: PropTypes.string,\n\n};\n\nPayStack.defaultProps = {\n  tag: 'button',\n  text: \"Make Payment\",\n  currency: \"NGN\",\n  disabled: false,\n  firstname: \"\",\n  lastname: \"\",\n  phone: \"\",\n  customercode: null,\n  channels: [],\n  paymentrequest: \"\",\n  paymentpage: \"\",\n  error: (res) => {},\n  load: (res) => {},\n  metadata: null,\n  subaccount: \"\",\n  bearer: \"\",\n  transaction_charge: 0,\n  subscription_count:0,\n  plan: null,\n  plan_interval: \"\",\n  subscription_limit: 0,\n  subscription_date: \"\",\n};\n\nexport default PayStack;\n"]}